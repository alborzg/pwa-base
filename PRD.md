# PWA Base - Product Requirements Document

## Project Overview
**PWA Base** is a template Progressive Web Application built with React + Vite + VitePWA, featuring a simple "Hello World" interface with installability and automatic deployment capabilities.

## Current Status âœ…
- [x] Basic PWA setup with React + Vite + VitePWA
- [x] "Hello World" display
- [x] "Add App" button with install prompt handling
- [x] Local development and testing working
- [x] Git repository initialized with alborzg user

## Goals for Today

### Goal 1: âœ… Add App Installation Feature 
**Status: COMPLETED** - The "Add App" button is implemented and working

### Goal 2: ðŸŽ¯ Deploy Automatically on Vercel using GitHub Actions
**Status: IN PROGRESS** - Need to complete the deployment pipeline

---

## Implementation Stories

### Phase 1: Repository Setup & GitHub Integration

#### Story 1.1: Create GitHub Repository
- [ ] Create new repository on GitHub named `pwa-base`
- [ ] Add repository description: "A simple PWA template with React + Vite + VitePWA"
- [ ] Set repository to public
- [ ] Do NOT initialize with README (we already have one)

**Commands:**
```bash
# After creating repo on GitHub
git remote add origin https://github.com/alborzg/pwa-base.git
git branch -M main
git push -u origin main
```

#### Story 1.2: Verify Repository Connection
- [ ] Confirm all files are pushed to GitHub
- [ ] Verify PWA assets are included (vite.config.ts, manifest config, etc.)
- [ ] Check that .gitignore is properly excluding node_modules and dist

---

### Phase 2: Vercel Deployment Setup

#### Story 2.1: Connect Vercel to GitHub Repository
- [x] Go to [vercel.com](https://vercel.com) and sign in with GitHub
- [x] Click "New Project"
- [x] Import the `pwa-base` repository
- [x] Configure build settings:
  - **Framework Preset**: Vite
  - **Build Command**: `npm run build`
  - **Output Directory**: `dist`
  - **Install Command**: `npm install`

#### Story 2.2: Configure Environment Variables (if needed)
- [x] No environment variables needed for basic setup
- [x] Verify deployment works with default settings
- [x] **Fixed npm registry issue**: Added `.npmrc` to use public npm registry

#### Story 2.3: Test Manual Deployment
- [x] Deploy the current main branch
- [x] Verify PWA features work on deployed version:
  - [x] Service worker loads correctly
  - [x] Manifest file is accessible
  - [x] "Add App" button appears on mobile/compatible browsers
  - [x] App can be installed to home screen

**âœ… COMPLETED**: App successfully deployed to Vercel!

---

### Phase 3: GitHub Actions CI/CD Pipeline

#### Story 3.1: Create GitHub Actions Workflow File
- [ ] Create `.github/workflows/deploy.yml`
- [ ] Configure workflow to trigger on push to main branch
- [ ] Set up Node.js environment
- [ ] Install dependencies and build project
- [ ] Deploy to Vercel using Vercel CLI

**File to create: `.github/workflows/deploy.yml`**

#### Story 3.2: Configure Vercel CLI Integration
- [ ] Generate Vercel token for GitHub Actions
- [ ] Add Vercel secrets to GitHub repository:
  - `VERCEL_TOKEN`
  - `VERCEL_ORG_ID`
  - `VERCEL_PROJECT_ID`
- [ ] Update workflow to use Vercel CLI for deployment

#### Story 3.3: Test Automated Deployment
- [ ] Make a small change to the app (e.g., update title or button text)
- [ ] Commit and push to main branch
- [ ] Verify GitHub Actions workflow runs successfully
- [ ] Confirm deployment appears on Vercel
- [ ] Test PWA functionality on deployed version

---

### Phase 4: PWA Enhancement & Optimization

#### Story 4.1: Improve PWA Manifest
- [ ] Add proper app icons (replace placeholder SVGs)
- [ ] Configure start_url and scope
- [ ] Add categories and screenshots for app stores
- [ ] Test manifest validation

#### Story 4.2: Enhance Install Experience
- [ ] Add install prompt dismissal handling
- [ ] Show different messages for different platforms (iOS vs Android vs Desktop)
- [ ] Add visual feedback during install process
- [ ] Handle already installed state

#### Story 4.3: Add Offline Functionality
- [ ] Verify service worker caching works
- [ ] Test offline functionality
- [ ] Add offline indicator if needed
- [ ] Ensure graceful offline experience

---

## Technical Requirements

### Build Requirements
- **Node.js**: 18.7+ (current version compatible)
- **Package Manager**: npm
- **Build Tool**: Vite 7.x
- **Framework**: React 19.x with TypeScript

### Deployment Requirements
- **Hosting**: Vercel
- **Domain**: Auto-generated Vercel domain (vercel.app)
- **SSL**: Automatic HTTPS (required for PWA)
- **CI/CD**: GitHub Actions

### PWA Requirements
- **Service Worker**: Auto-generated by VitePWA
- **Manifest**: Web App Manifest with proper icons
- **HTTPS**: Required for PWA features
- **Installability**: beforeinstallprompt handling

---

## Success Criteria

### MVP Success Criteria
- [ ] App deploys automatically on every push to main
- [ ] PWA works correctly on deployed version
- [ ] "Add App" button functions on mobile devices
- [ ] App can be installed to home screen/desktop
- [ ] GitHub Actions workflow completes without errors

### Advanced Success Criteria
- [ ] Lighthouse PWA score > 90
- [ ] Performance score > 90
- [ ] Accessibility score > 90
- [ ] App works offline (basic functionality)
- [ ] Install experience is smooth across platforms

---

## Next Steps

1. **Immediate (Next 30 minutes)**:
   - Create GitHub repository
   - Push code to GitHub
   - Connect to Vercel
   - Test manual deployment

2. **Short-term (Next 60 minutes)**:
   - Set up GitHub Actions workflow
   - Configure automated deployment
   - Test full CI/CD pipeline

3. **Optional Enhancements**:
   - Add proper app icons
   - Improve offline functionality
   - Add more PWA features

---

## Commands Reference

### Development
```bash
npm run dev          # Start development server
npm run build        # Build for production
npm run preview      # Preview production build
npm run lint         # Run ESLint
```

### Deployment
```bash
git add .
git commit -m "feat: add new feature"
git push origin main  # Triggers automatic deployment
```

### Testing PWA
- Use Chrome DevTools > Application > Manifest
- Test on mobile device or Chrome mobile emulation
- Check Network tab for service worker activity
- Verify offline functionality

---

## Troubleshooting

### Common Issues
- **Icons not loading**: Check file paths in manifest
- **Install prompt not showing**: Ensure HTTPS and valid manifest
- **Service worker not registering**: Check console for errors
- **Build failing**: Verify Node.js version compatibility

### Debug Commands
```bash
npm run build 2>&1 | tee build.log  # Capture build output
npx vite preview --host              # Test on local network
```

---

*Last updated: [Current Date]*
*Status: Ready for implementation*
